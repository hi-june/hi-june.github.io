---
title:  "[윤성우의 열혈 Java 프로그래밍] Chapter 19 - 자바의 메모리 모델과 Object 클래스"
excerpt: "Java 문법 정리!"

categories:
  - Java lang
tags:
  - java

toc: true
toc_sticky: true

date: 2022-11-24
last_modified_at: 2022-11-24
---
## 19-1. 자바 가상머신의 메모리 모델
### - <u>가상머신은 운영체제 위에서 동작합니다.</u>
> 자바 가상머신은 운영체제 위에서 실행되는 하나의 프로그램이다.  
> 자바 프로그램은 자바 가상머신에서 실행되는 프로그램이다.

프로그램의 실행에 필요한 메모리 공간을 가리켜 '메인 메모리(Main Memory)'라고 한다.  
그리고 이 메모리의 효율적인 사용을 위해서 운영체제가 응용프로그램에게 메모리를 할당해준다.  
<br>
즉, 자바 가상머신은 운영체제가 할당해 주는 메모리 공간을 기반으로 스스로를 실행하면서 더불어 자바 응용 프로그램의 실행도 돕는다.


### - <u>자바 가상머신의 메모리 살림살이</u>
가상머신은 운영체제로부터 할당받은 메모리 공간의 효율적인 사용을 고민해야 한다.  
그리고 이 저장공간의 효율적인 사용을 위해 '수납장' 처럼 메모리 공간을 나누고 데이터를 특성에 따라 구분해서 저장한다.  
![image](/assets/images/java-lang/19-1.png){: width="50%" height="50%"}<br>

각각의 메모리 영역에는 다음의 데이터들을 저장한다.  

- 메소드 영역(Method Area): 메소드의 바이트코드, static 변수
- 스택 영역(Stack Area): 지역변수, 매개변수
- 힙 영역(Heap Area): 인스턴스


### - <u>메소드 영역(Method Area)</u>
> '프로그램이 종료될 때까지' 유지되어야 할 정보가 저장된다.
> 바이트 코드(Byte Code): 소스파일을 컴파일할 때 생성되는, 자바 가상머신에 의해 실행이 가능한 코드

![image](/assets/images/java-lang/19-2.png){: width="50%" height="50%"}<br>

바이트 코드도 메모리 공간에 존재해야 실행이 가능하다.  
인스턴스의 생성 및 클래스 변수의 접근을 위해서는 먼저 해당 클래스의 바이트코드가 메모리 공간에 로딩되어야 한다.  
즉, 메소드 영역은 특정 클래스의 정보가 메모리 공간에 올려질 때 채워지는 영역이다.


### - <u>스택 영역(Stack Area)</u>
스택은 지역 변수와 매개변수가 저장되는 공간이다. 이 둘은 다음과 같은 공통점이 있다.  
> 중괄호로 구분되는 지역 내에서만 유효한 변수들이다.  

![image](/assets/images/java-lang/19-3.png){: width="70%" height="70%"}<br>
![image](/assets/images/java-lang/19-4.png){: width="70%" height="70%"}<br>
![image](/assets/images/java-lang/19-5.png){: width="70%" height="70%"}<br>

즉, 중괄호 내에 할당된 이후에 해당 중괄호를 벗어나면 바로 소멸되는 특성의 데이터 저장을 위한 영역이  
'스택'이다.  


### - <u>힙 영역(Heap Area)</u>
인스턴스를 스택이 아닌 힙이라는 별도의 영역에 할당하는 이유는 무엇일까?  
> 인스턴스의 소멸 시점과 소멸 방법이 지역변수와 다르기 때문이다.

![image](/assets/images/java-lang/19-6.png){: width="80%" height="80%"}<br>


### - <u>자바 가상머신의 인스턴스 소멸시기</u>
인스턴스의 소멸시기는 더 이상 접근할 수 없어지는 시기,  
즉 대상 인스턴스를 참조하는 게 더 이상 없을 때이다.  
![image](/assets/images/java-lang/19-7.png){: width="50%" height="50%"}<br>

이러한 인스턴스의 소멸 방식을 가리켜 '가비지 컬렉션(Garbage Collection)이라고 한다.  
정리하자면, 힙 영역은 가상머신에 의한 가비지 컬렉션이 일어나는 메모리 공간이다.  
즉 스택 영역과 힙 영역을 구분하여 관리하는 이유는 가비지 컬렉션 때문이다.


## 19-2. Object 클래스
### - <u></u>
### - <u></u>
### - <u></u>
### - <u></u>
### - <u></u>